{"title":"Linux基础综合练习2","uid":"787fb5eaa60e82359b7afd58d35677cd","slug":"Linux基础综合练习2","date":"2025-08-08T06:13:15.000Z","updated":"2025-08-09T06:59:29.367Z","comments":true,"path":"api/articles/Linux基础综合练习2.json","keywords":null,"cover":[],"content":"<h2 id=\"1、使用反弹的shell创建uid为0的账户，非交互设置密码\"><a href=\"#1、使用反弹的shell创建uid为0的账户，非交互设置密码\" class=\"headerlink\" title=\"1、使用反弹的shell创建uid为0的账户，非交互设置密码\"></a>1、使用反弹的shell创建uid为0的账户，非交互设置密码</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useradd -o -u 0 <span class=\"built_in\">test</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;test:wyf153135&quot;</span> | chpasswd</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250808154142516.png\" alt=\"image-20250808154142516\"></p>\n<h2 id=\"2、使用echo写入计划任务实现在八月的每周五的每一小时，每一分钟备份-var-log-secure要求文件名包含当前时间\"><a href=\"#2、使用echo写入计划任务实现在八月的每周五的每一小时，每一分钟备份-var-log-secure要求文件名包含当前时间\" class=\"headerlink\" title=\"2、使用echo写入计划任务实现在八月的每周五的每一小时，每一分钟备份&#x2F;var&#x2F;log&#x2F;secure要求文件名包含当前时间\"></a>2、使用echo写入计划任务实现在八月的每周五的每一小时，每一分钟备份&#x2F;var&#x2F;log&#x2F;secure要求文件名包含当前时间</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;* * * 8 5 cp -a /var/log/secure /var/log/secure-$(date +&quot;\\%Y\\%m\\%d-\\%H\\%M\\%S&quot;).back&#x27;</span> | crontab -</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250808160906911.png\" alt=\"image-20250808160906911\"></p>\n<h2 id=\"3、演示查找具有suid权限的可执行账户，实现提权\"><a href=\"#3、演示查找具有suid权限的可执行账户，实现提权\" class=\"headerlink\" title=\"3、演示查找具有suid权限的可执行账户，实现提权\"></a>3、演示查找具有suid权限的可执行账户，实现提权</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf tmp]# find / -perm -4000 2&gt;/dev/null</span><br><span class=\"line\">/usr/bin/fusermount</span><br><span class=\"line\">/usr/bin/chage</span><br><span class=\"line\">/usr/bin/gpasswd</span><br><span class=\"line\">/usr/bin/newgrp</span><br><span class=\"line\">/usr/bin/su</span><br><span class=\"line\">/usr/bin/mount</span><br><span class=\"line\">/usr/bin/umount</span><br><span class=\"line\">/usr/bin/pkexec</span><br><span class=\"line\">/usr/bin/passwd</span><br><span class=\"line\">/usr/bin/crontab</span><br><span class=\"line\">/usr/bin/chfn</span><br><span class=\"line\">/usr/bin/chsh</span><br><span class=\"line\">/usr/bin/at</span><br><span class=\"line\">/usr/bin/sudo</span><br><span class=\"line\">/usr/bin/staprun</span><br><span class=\"line\">/usr/sbin/grub2-set-bootflag</span><br><span class=\"line\">/usr/sbin/pam_timestamp_check</span><br><span class=\"line\">/usr/sbin/unix_chkpwd</span><br><span class=\"line\">/usr/sbin/userhelper</span><br><span class=\"line\">/usr/sbin/mount.nfs</span><br><span class=\"line\">/usr/lib/polkit-1/polkit-agent-helper-1</span><br><span class=\"line\">/usr/libexec/qemu-bridge-helper</span><br><span class=\"line\">/usr/libexec/dbus-1/dbus-daemon-launch-helper</span><br><span class=\"line\">/usr/libexec/gstreamer-1.0/gst-ptp-helper</span><br><span class=\"line\">/usr/libexec/cockpit-session</span><br><span class=\"line\">/usr/libexec/sssd/krb5_child</span><br><span class=\"line\">/usr/libexec/sssd/ldap_child</span><br><span class=\"line\">/usr/libexec/sssd/selinux_child</span><br><span class=\"line\">/usr/libexec/sssd/proxy_child</span><br><span class=\"line\">/usr/libexec/Xorg.wrap</span><br><span class=\"line\">/usr/libexec/spice-gtk-x86_64/spice-client-glib-usb-acl-helper</span><br><span class=\"line\">[root@wyf 桌面]# <span class=\"built_in\">chmod</span> u+s /bin/bash</span><br><span class=\"line\">[root@wyf 桌面]# <span class=\"built_in\">chmod</span> u+s /bin/find</span><br><span class=\"line\">[root@wyf 桌面]# <span class=\"built_in\">chmod</span> u+s /bin/vim</span><br><span class=\"line\">[root@wyf tmp]# su - user01</span><br><span class=\"line\">[user01@wyf ~]# find /root/file1.txt</span><br><span class=\"line\">test.txt</span><br><span class=\"line\">[user01@wyf ~]$ vim /root/file1.txt</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4、编写死循环脚本，使用ps-aux找到pid，利用kill命令关闭进程\"><a href=\"#4、编写死循环脚本，使用ps-aux找到pid，利用kill命令关闭进程\" class=\"headerlink\" title=\"4、编写死循环脚本，使用ps aux找到pid，利用kill命令关闭进程\"></a>4、编写死循环脚本，使用ps aux找到pid，利用kill命令关闭进程</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">while</span>((<span class=\"number\">2</span>&gt;<span class=\"number\">1</span>))</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;ddd&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf 桌面]# vim test.sh</span><br><span class=\"line\">[root@wyf 桌面]# <span class=\"built_in\">chmod</span> +x test.sh</span><br><span class=\"line\">[root@wyf 桌面]# ./test.sh</span><br><span class=\"line\">[root@wyf 桌面]# ps aux</span><br><span class=\"line\">[root@wyf 桌面]# top</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250808161305922.png\" alt=\"image-20250808161305922\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250808161227985.png\" alt=\"image-20250808161227985\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@wyf 桌面]# <span class=\"built_in\">kill</span> -9 29905</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/image-20250808161344509.png\" alt=\"image-20250808161344509\"></p>\n<h2 id=\"5、解释并演示转义符号的作用\"><a href=\"#5、解释并演示转义符号的作用\" class=\"headerlink\" title=\"5、解释并演示转义符号的作用\"></a>5、解释并演示转义符号的作用</h2><h3 id=\"1-基础概念\"><a href=\"#1-基础概念\" class=\"headerlink\" title=\"1.基础概念\"></a>1.基础概念</h3><p><strong>转义目的</strong>：</p>\n<ul>\n<li>让特殊字符失去特殊含义（如 <code>$</code> → <code>\\$</code>）</li>\n<li>让普通字符获得特殊功能（如 <code>n</code> → <code>\\n</code> 换行）</li>\n<li>确保字符按字面意义处理</li>\n</ul>\n<h3 id=\"2-命令行中的转义（以Bash为例）\"><a href=\"#2-命令行中的转义（以Bash为例）\" class=\"headerlink\" title=\"2.命令行中的转义（以Bash为例）\"></a>2.命令行中的转义（以Bash为例）</h3><h4 id=\"2-1-基础转义\"><a href=\"#2-1-基础转义\" class=\"headerlink\" title=\"2.1 基础转义\"></a>2.1 基础转义</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;成本：\\$100&quot;</span>      <span class=\"comment\"># 转义$ → 成本：$100</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;文件名：file\\ name.txt&quot;</span>  <span class=\"comment\"># 转义空格 → 不分割参数</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-2-多级转义演示\"><a href=\"#2-2-多级转义演示\" class=\"headerlink\" title=\"2.2 多级转义演示\"></a>2.2 多级转义演示</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1级转义</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Hello\\nWorld&quot;</span>    <span class=\"comment\"># 输出：Hello\\nWorld (未转义)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2级转义（使用echo -e）</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;Hello\\nWorld&quot;</span> <span class=\"comment\"># 输出换行：</span></span><br><span class=\"line\">                       <span class=\"comment\"># Hello</span></span><br><span class=\"line\">                       <span class=\"comment\"># World</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3级转义（存储到变量）</span></span><br><span class=\"line\">msg=<span class=\"string\">&quot;Message:\\nLine2&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"variable\">$msg</span>           <span class=\"comment\"># 输出：</span></span><br><span class=\"line\">                       <span class=\"comment\"># Message:</span></span><br><span class=\"line\">                       <span class=\"comment\"># Line2</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-3特殊字符转义\"><a href=\"#2-3特殊字符转义\" class=\"headerlink\" title=\"2.3特殊字符转义\"></a>2.3特殊字符转义</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;引号：\\&quot;&quot;</span>         <span class=\"comment\"># 输出：引号：&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;反斜杠：\\\\&quot;</span>       <span class=\"comment\"># 输出：反斜杠：\\</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;命令替换：\\$(date)&quot;</span> <span class=\"comment\"># 输出：命令替换：$(date)</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-脚本中的转义\"><a href=\"#3-脚本中的转义\" class=\"headerlink\" title=\"3.脚本中的转义\"></a>3.脚本中的转义</h3><h4 id=\"3-1-Shell脚本-test-sh\"><a href=\"#3-1-Shell脚本-test-sh\" class=\"headerlink\" title=\"3.1 Shell脚本 (test.sh)\"></a>3.1 Shell脚本 (test.sh)</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"comment\"># 转义$和换行符</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;当前用户：\\$USER&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;第一行\\n第二行&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># here文档转义</span></span><br><span class=\"line\"><span class=\"built_in\">cat</span> &lt;&lt; <span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"string\">未转义的$PATH</span></span><br><span class=\"line\"><span class=\"string\">转义的\\$PATH</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>执行</strong>：<code>bash test.sh</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">当前用户：<span class=\"variable\">$USER</span></span><br><span class=\"line\">第一行</span><br><span class=\"line\">第二行</span><br><span class=\"line\">未转义的/usr/local/bin:...</span><br><span class=\"line\">转义的<span class=\"variable\">$PATH</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-2-Python脚本-escape-py\"><a href=\"#3-2-Python脚本-escape-py\" class=\"headerlink\" title=\"3.2 Python脚本 (escape.py)\"></a>3.2 Python脚本 (escape.py)</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import re</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 正则表达式转义</span></span><br><span class=\"line\">pattern = re.compile(r<span class=\"string\">&#x27;\\d+\\.\\d+&#x27;</span>)  <span class=\"comment\"># 匹配数字如 3.14</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;匹配：&quot;</span> <span class=\"keyword\">if</span> pattern.match(<span class=\"string\">&quot;3.14&quot;</span>) <span class=\"keyword\">else</span> <span class=\"string\">&quot;不匹配&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 字符串转义</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;双引号：\\&quot; \\n反斜杠：\\\\&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<p><strong>执行</strong>：<code>python escape.py</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">匹配：</span><br><span class=\"line\">双引号：<span class=\"string\">&quot; </span></span><br><span class=\"line\"><span class=\"string\">反斜杠：\\</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-应用场景深度转义\"><a href=\"#4-应用场景深度转义\" class=\"headerlink\" title=\"4.应用场景深度转义\"></a>4.应用场景深度转义</h3><h4 id=\"4-1-正则表达式\"><a href=\"#4-1-正则表达式\" class=\"headerlink\" title=\"4.1 正则表达式\"></a>4.1 正则表达式</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查找所有点号结尾的文件</span></span><br><span class=\"line\">grep <span class=\"string\">&#x27;\\.txt$&#x27;</span> files.txt</span><br></pre></td></tr></table></figure>\n\n<p><strong>分析</strong>：</p>\n<ul>\n<li><code>\\.</code> → 转义<code>.</code> (否则匹配任意字符)</li>\n<li><code>$</code> → 行尾锚点</li>\n</ul>\n<h4 id=\"4-2-Sed命令\"><a href=\"#4-2-Sed命令\" class=\"headerlink\" title=\"4.2 Sed命令\"></a>4.2 Sed命令</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 替换路径 /usr/local/bin → /opt/bin</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;PATH=/usr/local/bin&quot;</span> | sed <span class=\"string\">&#x27;s/\\/usr\\/local\\/bin/\\/opt\\/bin/&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>简化方法</strong>：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 使用不同分隔符避免转义</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;PATH=/usr/local/bin&quot;</span> | sed <span class=\"string\">&#x27;s|/usr/local/bin|/opt/bin|&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-3-Crontab特殊转义\"><a href=\"#4-3-Crontab特殊转义\" class=\"headerlink\" title=\"4.3 Crontab特殊转义\"></a>4.3 Crontab特殊转义</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 正确写法（%需转义）</span></span><br><span class=\"line\">(crontab -l 2&gt;/dev/null; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;* * * * * date +&#x27;\\%Y\\%m\\%d&#x27; &gt; /tmp/date.log&quot;</span>) | crontab -</span><br></pre></td></tr></table></figure>\n\n<p><strong>错误对照</strong>：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 未转义% → 实际会发送邮件导致错误</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;* * * * * date +&#x27;%Y%m%d&#x27; &gt; /tmp/date.log&quot;</span> | crontab -</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-4-文件查找\"><a href=\"#4-4-文件查找\" class=\"headerlink\" title=\"4.4 文件查找\"></a>4.4 文件查找</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查找带问号的文件</span></span><br><span class=\"line\">find . -name <span class=\"string\">&#x27;file\\?.txt&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-转义体系总结表\"><a href=\"#5-转义体系总结表\" class=\"headerlink\" title=\"5.转义体系总结表\"></a>5.转义体系总结表</h3><table>\n<thead>\n<tr>\n<th>上下文</th>\n<th>需转义字符</th>\n<th>转义形式</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Shell普通</td>\n<td>$ &#96; “ \\ ! &amp;</td>\n<td></td>\n<td>$ \\ &#96; “ \\ ! &amp; |</td>\n</tr>\n<tr>\n<td>echo -e</td>\n<td>\\n \\t \\r \\a</td>\n<td>\\n \\t \\r \\a</td>\n<td><code>echo -e &quot;行1\\\\n行2&quot;</code></td>\n</tr>\n<tr>\n<td>正则表达式</td>\n<td>. * ^ $ [ ] { } \\</td>\n<td>. * ^ $ [ ] { } \\</td>\n<td><code>grep &#39;file\\.txt&#39;</code></td>\n</tr>\n<tr>\n<td>Sed替换</td>\n<td>&#x2F;</td>\n<td>/ 或换分隔符</td>\n<td>&#96;sed ‘s</td>\n</tr>\n<tr>\n<td>Crontab</td>\n<td>%</td>\n<td>%</td>\n<td><code>date +&#39;\\%Y\\%m\\%d&#39;</code></td>\n</tr>\n<tr>\n<td>编程语言(字符串)</td>\n<td>“ ‘ \\</td>\n<td>“ ‘ \\</td>\n<td><code>print(&quot;\\&quot;Hello\\&quot;&quot;)</code></td>\n</tr>\n<tr>\n<td>编程语言(正则)</td>\n<td>需双重转义</td>\n<td>\\</td>\n<td><code>re.compile(&quot;\\\\d+&quot;)</code></td>\n</tr>\n</tbody></table>\n<h3 id=\"6-黄金规则\"><a href=\"#6-黄金规则\" class=\"headerlink\" title=\"6.黄金规则\"></a>6.黄金规则</h3><ol>\n<li><p><strong>匹配原则</strong>：转义深度应与处理层级一致（bash→工具→语言）</p>\n</li>\n<li><p><strong>测试策略</strong>：先用<code>echo</code>验证转义效果，再放入实际命令</p>\n</li>\n<li><p><strong>简化技巧</strong>：</p>\n<ul>\n<li>使用单引号<code>&#39;</code>减少shell层转义</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>更换分隔符（如sed用<code>|</code>替代<code>/</code>）<ul>\n<li>原始字符串（Python的<code>r&#39;\\d+&#39;</code>）</li>\n</ul>\n</li>\n</ul>\n<ol start=\"4\">\n<li><p><strong>危险区</strong>：当命令经过多级处理时（如：变量→ssh→远程shell），需多层转义</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安全远程执行示例</span></span><br><span class=\"line\">cmd=<span class=\"string\">&#x27;echo &quot;远程内容：\\$PATH&quot;&#x27;</span></span><br><span class=\"line\">ssh user@host <span class=\"string\">&quot;<span class=\"variable\">$cmd</span>&quot;</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n","text":"1、使用反弹的shell创建uid为0的账户，非交互设置密码12useradd -o -u 0 testecho \"test:wyf153135\" | chpa...","permalink":"/post/Linux基础综合练习2","photos":[],"count_time":{"symbolsCount":"4.2k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"Linux","slug":"Linux","count":15,"path":"api/tags/Linux.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1%E3%80%81%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%BC%B9%E7%9A%84shell%E5%88%9B%E5%BB%BAuid%E4%B8%BA0%E7%9A%84%E8%B4%A6%E6%88%B7%EF%BC%8C%E9%9D%9E%E4%BA%A4%E4%BA%92%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81\"><span class=\"toc-text\">1、使用反弹的shell创建uid为0的账户，非交互设置密码</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2%E3%80%81%E4%BD%BF%E7%94%A8echo%E5%86%99%E5%85%A5%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%9C%A8%E5%85%AB%E6%9C%88%E7%9A%84%E6%AF%8F%E5%91%A8%E4%BA%94%E7%9A%84%E6%AF%8F%E4%B8%80%E5%B0%8F%E6%97%B6%EF%BC%8C%E6%AF%8F%E4%B8%80%E5%88%86%E9%92%9F%E5%A4%87%E4%BB%BD-var-log-secure%E8%A6%81%E6%B1%82%E6%96%87%E4%BB%B6%E5%90%8D%E5%8C%85%E5%90%AB%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4\"><span class=\"toc-text\">2、使用echo写入计划任务实现在八月的每周五的每一小时，每一分钟备份&#x2F;var&#x2F;log&#x2F;secure要求文件名包含当前时间</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3%E3%80%81%E6%BC%94%E7%A4%BA%E6%9F%A5%E6%89%BE%E5%85%B7%E6%9C%89suid%E6%9D%83%E9%99%90%E7%9A%84%E5%8F%AF%E6%89%A7%E8%A1%8C%E8%B4%A6%E6%88%B7%EF%BC%8C%E5%AE%9E%E7%8E%B0%E6%8F%90%E6%9D%83\"><span class=\"toc-text\">3、演示查找具有suid权限的可执行账户，实现提权</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4%E3%80%81%E7%BC%96%E5%86%99%E6%AD%BB%E5%BE%AA%E7%8E%AF%E8%84%9A%E6%9C%AC%EF%BC%8C%E4%BD%BF%E7%94%A8ps-aux%E6%89%BE%E5%88%B0pid%EF%BC%8C%E5%88%A9%E7%94%A8kill%E5%91%BD%E4%BB%A4%E5%85%B3%E9%97%AD%E8%BF%9B%E7%A8%8B\"><span class=\"toc-text\">4、编写死循环脚本，使用ps aux找到pid，利用kill命令关闭进程</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5%E3%80%81%E8%A7%A3%E9%87%8A%E5%B9%B6%E6%BC%94%E7%A4%BA%E8%BD%AC%E4%B9%89%E7%AC%A6%E5%8F%B7%E7%9A%84%E4%BD%9C%E7%94%A8\"><span class=\"toc-text\">5、解释并演示转义符号的作用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">1.基础概念</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E7%9A%84%E8%BD%AC%E4%B9%89%EF%BC%88%E4%BB%A5Bash%E4%B8%BA%E4%BE%8B%EF%BC%89\"><span class=\"toc-text\">2.命令行中的转义（以Bash为例）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-1-%E5%9F%BA%E7%A1%80%E8%BD%AC%E4%B9%89\"><span class=\"toc-text\">2.1 基础转义</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-2-%E5%A4%9A%E7%BA%A7%E8%BD%AC%E4%B9%89%E6%BC%94%E7%A4%BA\"><span class=\"toc-text\">2.2 多级转义演示</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-3%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%E8%BD%AC%E4%B9%89\"><span class=\"toc-text\">2.3特殊字符转义</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E8%84%9A%E6%9C%AC%E4%B8%AD%E7%9A%84%E8%BD%AC%E4%B9%89\"><span class=\"toc-text\">3.脚本中的转义</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-Shell%E8%84%9A%E6%9C%AC-test-sh\"><span class=\"toc-text\">3.1 Shell脚本 (test.sh)</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-Python%E8%84%9A%E6%9C%AC-escape-py\"><span class=\"toc-text\">3.2 Python脚本 (escape.py)</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%E6%B7%B1%E5%BA%A6%E8%BD%AC%E4%B9%89\"><span class=\"toc-text\">4.应用场景深度转义</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-1-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F\"><span class=\"toc-text\">4.1 正则表达式</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-2-Sed%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">4.2 Sed命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-3-Crontab%E7%89%B9%E6%AE%8A%E8%BD%AC%E4%B9%89\"><span class=\"toc-text\">4.3 Crontab特殊转义</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-4-%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE\"><span class=\"toc-text\">4.4 文件查找</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-%E8%BD%AC%E4%B9%89%E4%BD%93%E7%B3%BB%E6%80%BB%E7%BB%93%E8%A1%A8\"><span class=\"toc-text\">5.转义体系总结表</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-%E9%BB%84%E9%87%91%E8%A7%84%E5%88%99\"><span class=\"toc-text\">6.黄金规则</span></a></li></ol></li></ol>","author":{"name":"wyf","slug":"blog-author","avatar":"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/18ca1dd2a86b2210b1ab142498bcf0b0.jpg","link":"/","description":"不知道应该写点什么，就这么看着吧","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"HTTP协议","uid":"6e271221aaa43fb7a2bf1b3992c80e53","slug":"HTTP协议","date":"2025-08-11T06:09:16.000Z","updated":"2025-08-11T08:02:54.633Z","comments":true,"path":"api/articles/HTTP协议.json","keywords":null,"cover":null,"text":"静态页面 HTML，JavaScript 没有办法调用系统资源，CMD，bash 前端用户可以看到源代码 不与数据库做交互 动态页面 php，Java，与数据库...","permalink":"/post/HTTP协议","photos":[],"count_time":{"symbolsCount":221,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"Web","slug":"Web","count":2,"path":"api/tags/Web.json"}],"author":{"name":"wyf","slug":"blog-author","avatar":"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/18ca1dd2a86b2210b1ab142498bcf0b0.jpg","link":"/","description":"不知道应该写点什么，就这么看着吧","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"shell脚本编写","uid":"311e8dc63e7a9fc5e2fe4b450a9ec38f","slug":"shell脚本编写","date":"2025-08-08T02:13:05.000Z","updated":"2025-08-08T06:58:03.390Z","comments":true,"path":"api/articles/shell脚本编写.json","keywords":null,"cover":[],"text":"shell脚本编写一、核心定义：1、什么是 Shell？ Shell 是 Linux/Unix 操作系统的 命令行解释器 (Command Interprete...","permalink":"/post/shell脚本编写","photos":[],"count_time":{"symbolsCount":"7.1k","symbolsTime":"6 mins."},"categories":[],"tags":[{"name":"Linux","slug":"Linux","count":15,"path":"api/tags/Linux.json"}],"author":{"name":"wyf","slug":"blog-author","avatar":"https://cdn.jsdelivr.net/gh/Five0ne15/picgo_pic@main/picgo_picture/18ca1dd2a86b2210b1ab142498bcf0b0.jpg","link":"/","description":"不知道应该写点什么，就这么看着吧","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}